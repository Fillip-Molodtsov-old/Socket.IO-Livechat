!function i(a,c,s){function l(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=c[t]={exports:{}};a[t][0].call(r.exports,function(e){return l(a[t][1][e]||e)},r,r.exports,i,a,c,s)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,n){"use strict";var o=io();o.on("connect",function(){var e=$.deparam(window.location.search);o.emit("join",e,function(e){e&&(alert(e),window.location.href="/")})}),o.on("updateUserList",function(e){var t=$("<ol></ol>");e.forEach(function(e){t.append($("<li></li>").text(e))}),$("#users").html(t)}),o.on("disconnect",function(){console.log("Bye bye")});var c=function(){var e=$("#messages"),t=e.children("li:last-child"),n=e.prop("scrollTop"),o=e.prop("scrollHeight");o<=n+e.prop("clientHeight")+t.innerHeight()+t.prev().innerHeight()&&e.scrollTop(o)};o.on("newMessage",function(e){var t=e.text,n=e.from,o=e.createdAt,r=$("#message-template").html(),i=Mustache.render(r,{text:t,from:n,createdAt:o});$("#messages").append(i),c()}),o.on("newLocationMessage",function(e){var t=e.text,n=e.from,o=e.createdAt,r=e.link,i=$("#location-message-template").html(),a=Mustache.render(i,{text:t,from:n,createdAt:o,link:r});$("#messages").append(a),c()}),$("#message-form").on("submit",function(e){e.preventDefault();var t=$("[name=message]");o.emit("createMessage",{text:t.val()},function(e){e&&alert(e),t.val("")})});var r=$("#send-location");r.on("click",function(){if(!navigator.geolocation)return alert("Your current browser doesn't support geolocation.");r.attr("disabled","disabled"),navigator.geolocation.getCurrentPosition(function(e){r.removeAttr("disabled"),o.emit("createGeolocationMessage",{latitude:e.coords.latitude,longitude:e.coords.longitude},function(e){e&&alert(e),r.removeAttr("disabled")})},function(e){return alert(e)})})},{}]},{},[1]);
//# sourceMappingURL=chat.min.js.map
